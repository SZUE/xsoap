<HTML>
<HEAD>
<TITLE>XSOAP FAQ
</TITLE>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Aleksander Slominski">
</HEAD>
<BODY BGCOLOR="white">

<H1>XSOAP FAQ</H2><P>

<h2><a name="cvs"></a>How to access the latest source code?</h2>

<p>
The latest packaged releases are available at
<a href="http://www.extreme.indiana.edu/xgws/">http://www.extreme.indiana.edu/xgws/</a>
and the latest source (if you want to be on the cutting edge) can now
be obtained now from anonymous CVS at:

<pre>cvs -d :pserver:anonymous@cvs.extreme.indiana.edu:/l/extreme/cvspub login
CVS password: cvsanon

cvs -d :pserver:anonymous@cvs.extreme.indiana.edu:/l/extreme/cvspub co xsoap-java
</pre>



<h2><a name="map_params"></a>How to change auto-generated parameter names that
XSOAP uses?</h2>

<p>By default XSOAP will give first parameter name the name of operation and
next parameter will be 'p2', next 'p3' and so on. This is unfortunate
consequence of Java introspection (java.lang.reflect) that does not allow to get
parameter names. If the Java class was compiled with debug info it is possible
to extract from debugging info names of parameters but it is not reliable
solution (if debug info is not included you can not do much ..) and requires
special 'super' introspection libraries (one more jar to include in XSOAP ...).<p>
Instead in XSOAP version 1.2.11+ you can easily map parameter names to any name
you like explicitly by calling XSOAP mapping API, for an example see
HelloServiceMapping in samples/hello directory that demonstrates how to map
parameters of sayHello methid from HelloService interface.<p>
&nbsp;


<h2><a name="xml_schemas"></a>How to use XML schema types with XSOAP?</h2>

<p>The file with XML schema type declarations should be compiled to generate
Java Beans using such tool as <a href="http://castor.exolab.org/">Castor</a>.<p>
You can find example of this approach in Google API sample (src/java/samples/google)
- look on included XML schema file (GoogleSearchResult.xsd) and Java Beans
classes generated by Castor (GoogleSearchResult.java etc.).<p>
&nbsp;


<h2><a name="xml_node"></a>How to process XML of unknown type (xsd:any)?</h2>

<p>From XSOAP version 1.2.12 it is now possible to use
<a href="http://www.extreme.indiana.edu/xgws/xsoap/xpp/download/PullParser2/doc/api/org/gjt/xpp/XmlNode.html">
XmlNode</a> to represent any XML content. Simply declare one of method
parameters as XmlNode or as return type. XmlNode class is similar to DOM Node
but it is much more lightweight (for description of
<a href="http://www.extreme.indiana.edu/xgws/xsoap/xpp/">XPP3</a> incremental
document object and how it compares with other Java XML DOM APIs model please
see
<a href="http://www-106.ibm.com/developerworks/xml/library/x-injava/index.html">
an article in Javaworld</a>).<p>
For example it is used in in very simple OGSA sample (src/java/samples/ogsa) to
process ServiceData elements. First in the interface GridService method
FindServiceData is defined to take and return XmlNode:

<p>
&nbsp;&nbsp;&nbsp;<code>public XmlNode FindServiceData(XmlNode xmlAsTree) throws RemoteException;</code>

<p>
and this method when implemented in&nbsp; GridServiceImpl it uses
<a href="http://www.extreme.indiana.edu/xgws/xsoap/xpp/download/PullParser2/doc/api/org/gjt/xpp/XmlNode.html">
XPP3 XmlNode API</a> to access parts of XML tree and then a simple utility
function that converts response XML string to XmlNode to return it (XmlNode&nbsp;
could be also constructed directly and then returned).<p>
&nbsp;<h2>How to see SOAP messages generated by XSOAP?</h2>

<p>To trace only SOAP message exchange use special XSOAP loggers:
<ul>
<li><code>soaprmi.trace.dispatch</code>: to see all sever side activity
(receiving messages and sending responses)
<li><code>soaprmi.trace.invoke</code>: to trace RPC request and response messages
</ul>

<p>For example:<dl>
<dt><code>-Dlog=soaprmi.trace</code>
        <dd>all messages; good for
        SOAP nodes that works as peers both providing services and using them
<dt><code>-Dlog=soaprmi.trace.invoke</code> <dd>only RPC invocations
<dt><code>-Dlog=soaprmi.trace.dispatch</code> <dd>trace how message is received, dispatched
and what response message is sent back
<dt><code>-Dlog=soaprmi.trace.invoke.out</code> <dd>only RPC requests
</dl>

<p>Moreover when you enable debug (-Ddebug) XSOAP logging output will
include also all XSOAP message processing both client and server side.

<p>&nbsp;




<h2>How to start multiple services on one shared embedded XSOAP HTTP web server?</h2>


<p>
to do this one need to start embedded HTTP server on this TCP port and use it for all
exported remote objects (services). simple doing export will not work:

<pre>        RemoteRef ref1 = UnicastRemoteObject.exportObject(obj1, 80);
        RemoteRef ref2 = UnicastRemoteObject.exportObject(obj1, 80);
</pre>

<p>as second exportObject will try to start new HTTP server on the same TCP port
so there will be network exception that this TCP port  is already used:

<pre>could not start default dispatcher; nested exception is:
java.net.BindException: Address in use: JVM_Bind
 at java.net.PlainSocketImpl.socketBind(Native Method)
 at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:405)
 at java.net.ServerSocket.<init>(ServerSocket.java:170)
 at java.net.ServerSocket.<init>(ServerSocket.java:82)
 at
soaprmi.soaprpc.PlainServerSocketFactory.<init>(PlainServerSocketFactory.java:40)
 at
soaprmi.soaprpc.PlainServerSocketFactory.newInstance(PlainServerSocketFactory.java:49)

 at
soaprmi.soaprpc.HttpSocketSoapServerFactory.newSoapServer(HttpSocketSoapServerFactory.java:43)

 at soaprmi.soaprpc.SoapServices.addDefaultDispatcher(SoapServices.java:115)
 at soaprmi.server.Services.createPort(Services.java:116)
</pre>

<p>instead different approach must be take - this will work just fine
when HTTP embedded server (more precisely Dispatcher) is shared:
<pre>        import soaprmi.server.Services;
        import soaprmi.server.UnicastRemoteObject;
        import soaprmi.soaprpc.SoapServices;

        Services services = SoapServices.newInstance(80);
        services.setMapping(soaprmi.soap.Soap.getDefault().getMapping());
        RemoteRef ref1 = UnicastRemoteObject.exportObject(obj1, services);
        RemoteRef ref2 = UnicastRemoteObject.exportObject(obj2, services);
</pre>

<p>Then make sure that when usning object you pass not generic URL (<code>http://host:port</code>)
but full URL that contains object path, for example:
<code>http://192.168.1.100:7890/GUID_1038105449175_1595867776_1</code>
<p>That URL can be obtained from XSOAP by using following code:
<pre>String remoteService1Url = SoapServices.getDefault().getStartpointLocation(ref1);
</pre>


<h2>How to pass
password to remote service?</h2>

<p>This question is hinting at bigger problem of associating addition
information with the SOAP RPC call. This information is not global but rather
thread specific (not shared between threads).<p>To create a generic solution
that will work both on client and server side we have added
soaprmi.server.ConnectionContext interface that represents information that will
be used when XSOAP connection is created by client or received by server.<p>



<h2>More questions?</h2>

<p>Send them to <a href="http://www.extreme.indiana.edu/xgws/index.html#mail">XSOAP mailing list</a>.

<p>
<p>[<a href="../README.html">Back To XSOAP Documentation</a>]<p>&nbsp;


<HR>
<address><a href="http://www.extreme.indiana.edu/~aslom/">Aleksander Slominski</a><address>
</address>
</ul>
</BODY>
</HTML>
